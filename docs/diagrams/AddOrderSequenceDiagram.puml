@startuml
!include style.puml
skinparam ArrowFontStyle plain

box Logic LOGIC_COLOR_T1
participant ":LogicManager" as LogicManager LOGIC_COLOR
participant ":AddressBookParser" as AddressBookParser LOGIC_COLOR
participant ":AddOrderCommandParser" as AddOrderCommandParser LOGIC_COLOR
participant ":AddOrderCommand" as AddOrderCommand LOGIC_COLOR
participant ":CommandResult" as CommandResult LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant "m:Model" as Model MODEL_COLOR
end box

box Storage STORAGE_COLOR_T1
participant "s:Storage" as Storage STORAGE_COLOR
end box

[-> LogicManager : userInput("addOrder p/...")
activate LogicManager

LogicManager -> AddressBookParser : parseCommand("addOrder p/... d/...")
activate AddressBookParser

create AddOrderCommandParser
AddressBookParser -> AddOrderCommandParser
activate AddOrderCommandParser
AddOrderCommandParser --> AddressBookParser
deactivate AddOrderCommandParser

AddressBookParser -> AddOrderCommandParser : parse("p/... d/...")
activate AddOrderCommandParser

create AddOrderCommand
AddOrderCommandParser -> AddOrderCommand
activate AddOrderCommand

AddOrderCommand --> AddOrderCommandParser
deactivate AddOrderCommand

AddOrderCommandParser --> AddressBookParser
deactivate AddOrderCommandParser

AddOrderCommandParser -[hidden]> AddressBookParser
destroy AddOrderCommandParser

AddressBookParser --> LogicManager :
deactivate AddressBookParser

LogicManager -> AddOrderCommand : execute(model)
activate AddOrderCommand

AddOrderCommand -> Model: model.getFilteredPersonList()
activate Model

Model --> AddOrderCommand: return ObservableList<Person>
deactivate Model

create Order
AddOrderCommand -> Order
activate Order

Order --> AddOrderCommand
deactivate Order

AddOrderCommand -> Model: model.setPerson(current, new)
activate Model

Model -> Storage : saveAddressBook()
activate Storage
Storage -> Storage : Save to file
activate Storage
Storage --> Storage
deactivate Storage
Storage --> Model: saved
deactivate Storage

Model --> AddOrderCommand
deactivate Model

create CommandResult
AddOrderCommand -> CommandResult
activate CommandResult

CommandResult --> AddOrderCommand
deactivate CommandResult

AddOrderCommand --> LogicManager
deactivate AddOrderCommand

[<--LogicManager
deactivate LogicManager

@enduml
